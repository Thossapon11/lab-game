<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏Å‡∏°‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢ - ‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Kanit', sans-serif; }
        
        .beaker {
            background: linear-gradient(to bottom, transparent 0%, transparent 70%, #fff 70%, #fff 100%);
            border: 3px solid #374151;
            border-radius: 0 0 50px 50px;
            position: relative;
            background: #fff;
        }
        
        .solution {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            border-radius: 0 0 47px 47px;
            transition: all 0.5s ease;
        }
        
        .measuring-cylinder {
            background: linear-gradient(to right, #f3f4f6 0%, #e5e7eb 50%, #f3f4f6 100%);
            border: 2px solid #374151;
            border-radius: 10px 10px 5px 5px;
            position: relative;
        }
        
        .scale-mark {
            border-top: 1px solid #6b7280;
            width: 20px;
            position: absolute;
            right: 0;
        }
        
        .powder {
            border-radius: 50%;
            position: absolute;
            animation: fall 1.5s forwards;
        }
        
        @keyframes fall {
            from { transform: translateY(0); opacity: 1; }
            to { transform: translateY(120px); opacity: 0; }
        }
        
        .stirring-rod {
            background: linear-gradient(to bottom, #8b5cf6 0%, #7c3aed 100%);
            border-radius: 50px;
            transform-origin: center center;
            transition: all 0.5s ease;
            position: absolute;
            width: 2px;
            height: 96px;
            left: 50%;
            transform: translateX(-50%) rotate(0deg);
        }
        
        .stirring-rod.active {
            animation: stir 1s ease-in-out infinite;
        }
        
        @keyframes stir {
            0% { transform: translateX(-50%) translateY(0) rotate(-10deg); }
            50% { transform: translateX(-50%) translateY(0) rotate(10deg); }
            100% { transform: translateX(-50%) translateY(0) rotate(-10deg); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-6">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-indigo-800 mb-2">üß™ ‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô</h1>
            <p class="text-lg text-gray-600">‡πÄ‡∏Å‡∏°‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢ - ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</p>
        </div>

        <div class="max-w-6xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden">
            <div class="bg-indigo-600 p-4">
                <div class="flex justify-between items-center text-white mb-2">
                    <span class="font-semibold">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</span>
                    <span id="progress-text">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1/5</span>
                </div>
                <div class="w-full bg-indigo-400 rounded-full h-3">
                    <div id="progress-bar" class="bg-yellow-400 h-3 rounded-full transition-all duration-500" style="width: 20%"></div>
                </div>
            </div>

            <div class="p-6">
                <div id="step-1" class="step-content">
                    <h2 class="text-2xl font-bold text-indigo-800 mb-4">üìã ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤</h2>
                    <div class="bg-blue-50 p-6 rounded-xl mb-6">
                        <h3 class="text-xl font-semibold mb-4">üéØ ‡πÇ‡∏à‡∏ó‡∏¢‡πå: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢</h3>
                        <div class="mb-6">
                            <label class="block text-sm font-medium mb-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏à‡∏ó‡∏¢‡πå</label>
                            <select id="compound-select" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500" onchange="updateProblem()">
                                <option value="NaCl">‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° NaCl 0.5 M ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ 250 mL</option>
                                <option value="KMnO4">‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° KMnO4 0.2 M ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ 500 mL</option>
                                <option value="CuSO4">‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà 3: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° CuSO4¬∑5H2O 0.3 M ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ 300 mL</option>
                                <option value="NaOH">‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà 4: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° NaOH 0.1 M ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ 1000 mL</option>
                                <option value="HCl">‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà 5: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° HCl 0.25 M ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ 400 mL</option>
                            </select>
                        </div>
                        
                        <div id="problem-display" class="grid md:grid-cols-2 gap-6 mb-6">
                            <div class="bg-white p-4 rounded-lg border-2 border-blue-300">
                                <h4 class="font-semibold text-blue-800 mb-3">üìù ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î</h4>
                                <div class="space-y-2">
                                    <div class="flex justify-between">
                                        <span>‡∏™‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö:</span>
                                        <span id="display-compound" class="font-semibold">NaCl</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£:</span>
                                        <span id="display-molarity" class="font-semibold">0.5 M</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£:</span>
                                        <span id="display-volume" class="font-semibold">250 mL</span>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-yellow-50 p-4 rounded-lg border-2 border-yellow-300">
                                <h4 class="font-semibold text-yellow-800 mb-3">üìö ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ</h4>
                                <div id="compound-info">
                                    <p class="text-sm"><span id="compound-details">NaCl ‡∏°‡∏µ‡∏°‡∏ß‡∏•‡πÇ‡∏°‡πÄ‡∏•‡∏Å‡∏∏‡∏• = 58.44 g/mol</span></p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <div></div>
                            <button onclick="nextStep(2)" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors">
                                ‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì üßÆ
                            </button>
                        </div>
                    </div>
                </div>

                <div id="step-2" class="step-content hidden">
                    <h2 class="text-2xl font-bold text-indigo-800 mb-4">üßÆ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</h2>
                    <div class="bg-green-50 p-6 rounded-xl mb-6">
                        <h3 class="text-xl font-semibold mb-4">üìê ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏ß‡∏•‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-white p-4 rounded-lg">
                                <h4 class="font-semibold mb-3">üìù ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÇ‡∏à‡∏ó‡∏¢‡πå</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span>‡∏™‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö:</span>
                                        <span id="calc-compound" class="font-semibold">NaCl</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô (M):</span>
                                        <span id="calc-molarity" class="font-semibold">0.5</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ (mL):</span>
                                        <span id="calc-volume" class="font-semibold">250</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>‡∏°‡∏ß‡∏•‡πÇ‡∏°‡πÄ‡∏•‡∏Å‡∏∏‡∏• (g/mol):</span>
                                        <span id="calc-mw" class="font-semibold">58.44</span>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-semibold mb-3">üßÆ ‡πÄ‡∏ï‡∏¥‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á</h4>
                                <div class="space-y-4 text-sm">
                                    <div class="bg-white p-3 rounded border">
                                        <p class="mb-2">1. ‡πÅ‡∏õ‡∏•‡∏á‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏¥‡∏ï‡∏£:</p>
                                        <p>
                                            <input type="number" id="volume-input" class="inline-block w-20 p-1 border rounded text-center" step="0.001" placeholder=""> mL √∑ 1000 = 
                                            <input type="number" id="volume-liters" class="inline-block w-20 p-1 border rounded text-center" step="0.001" placeholder=""> L
                                        </p>
                                    </div>
                                    
                                    <div class="bg-white p-3 rounded border">
                                        <p class="mb-2">2. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÇ‡∏°‡∏•:</p>
                                        <p>
                                            <input type="number" id="molarity-input" class="inline-block w-20 p-1 border rounded text-center" step="0.1" placeholder=""> √ó 
                                            <input type="number" id="volume-for-moles" class="inline-block w-20 p-1 border rounded text-center" step="0.001" placeholder=""> = 
                                            <input type="number" id="moles-calc" class="inline-block w-20 p-1 border rounded text-center" step="0.0001" placeholder=""> mol
                                        </p>
                                    </div>
                                    
                                    <div class="bg-white p-3 rounded border">
                                        <p class="mb-2">3. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏ß‡∏•‡∏™‡∏≤‡∏£:</p>
                                        <p>
                                            <input type="number" id="moles-for-mass" class="inline-block w-20 p-1 border rounded text-center" step="0.0001" placeholder=""> √ó 
                                            <input type="number" id="mw-input" class="inline-block w-24 p-1 border rounded text-center" step="0.01" placeholder=""> = 
                                            <input type="number" id="mass-calc" class="inline-block w-24 p-1 border rounded text-center" step="0.01" placeholder=""> g
                                        </p>
                                    </div>
                                    
                                    <button onclick="checkCalculation()" class="w-full bg-green-500 hover:bg-green-600 text-white py-2 rounded-lg font-semibold transition-colors">
                                        ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div id="calculation-feedback" class="mt-4 hidden"></div>
                    </div>
                    
                    <div class="flex justify-between items-center">
                        <button onclick="previousStep(1)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                            ‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
                        </button>
                        <button id="next-btn-calc" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors hidden" onclick="nextStep(3)">
                            ‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ä‡∏±‡πà‡∏á‡∏™‡∏≤‡∏£ ‚öñÔ∏è
                        </button>
                    </div>
                </div>

                <div id="step-3" class="step-content hidden">
                    <h2 class="text-2xl font-bold text-indigo-800 mb-4">‚öñÔ∏è ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ä‡∏±‡πà‡∏á‡∏™‡∏≤‡∏£</h2>
                    
                    <div class="grid md:grid-cols-2 gap-8 mb-6">
                        <div>
                            <div class="bg-gray-100 p-6 rounded-xl">
                                <h3 class="text-lg font-semibold mb-4">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ä‡∏±‡πà‡∏á‡∏î‡∏¥‡∏à‡∏¥‡∏ï‡∏≠‡∏•</h3>
                                <div class="bg-black text-green-400 p-4 rounded-lg font-mono text-2xl text-center mb-4">
                                    <span id="scale-display">0.00 g</span>
                                </div>
                                <div class="text-center mb-4">
                                    <div class="inline-block bg-gray-300 w-32 h-32 rounded-lg relative">
                                        <div id="powder-on-scale" class="absolute inset-4 bg-yellow-200 rounded-lg opacity-0 transition-opacity duration-500"></div>
                                    </div>
                                </div>
                                <button onclick="addPowder()" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded-lg font-semibold transition-colors">
                                    ‡πÄ‡∏ï‡∏¥‡∏°‡∏ú‡∏á‡∏™‡∏≤‡∏£
                                </button>
                            </div>
                        </div>
                        <div>
                            <div class="bg-blue-50 p-6 rounded-xl">
                                <h3 class="text-lg font-semibold mb-4">‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</h3>
                                <div class="text-3xl font-bold text-indigo-600 mb-2">
                                    <span id="required-mass">0.00</span> g
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-4 mb-4">
                                    <div id="weighing-progress" class="bg-green-500 h-4 rounded-full transition-all duration-300" style="width: 0%"></div>
                                </div>
                                <div id="weighing-status" class="text-center text-gray-600">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡∏±‡πà‡∏á‡∏™‡∏≤‡∏£</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center">
                        <button onclick="previousStep(2)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                            ‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
                        </button>
                        <button id="next-btn-weighing" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors hidden" onclick="nextStep(4)">
                            ‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏™‡∏≤‡∏£ üåä
                        </button>
                    </div>
                </div>

                <div id="step-4" class="step-content hidden">
                    <h2 class="text-2xl font-bold text-indigo-800 mb-4">üåä ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏™‡∏≤‡∏£</h2>
                    
                    <div class="grid md:grid-cols-2 gap-8 mb-6">
                        <div>
                            <div class="bg-gray-100 p-6 rounded-xl">
                                <h3 class="text-lg font-semibold mb-4">üß™ ‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏™‡∏≤‡∏£</h3>
                                <div class="text-sm text-gray-600 mb-4 p-3 bg-blue-50 rounded-lg">
                                    üí° <strong>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</strong> ‡∏•‡∏≠‡∏á‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢<br>
                                    ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÑ‡∏î‡πâ
                                </div>
                                <div class="relative">
                                    <div class="beaker w-32 h-40 mx-auto mb-4 relative">
                                        <div id="solution-level" class="solution bg-blue-200" style="height: 30%;"></div>
                                        <div id="powder-particles" class="absolute inset-0"></div>
                                        
                                        <div id="stirring-rod" class="stirring-rod absolute w-2 h-24 left-1/2 transform -translate-x-1/2 -top-4"></div>
                                    </div>
                                    
                                    <div id="dissolving-status" class="text-center text-gray-600 mb-4">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏™‡∏≤‡∏£</div>
                                    
                                    <div class="grid grid-cols-3 gap-2">
                                        <button onclick="stirSolution()" class="bg-purple-500 hover:bg-purple-600 text-white py-2 px-3 rounded text-sm font-semibold transition-colors">
                                            ü•Ñ ‡∏Ñ‡∏ô
                                        </button>
                                        <button onclick="addWater()" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-3 rounded text-sm font-semibold transition-colors">
                                            üíß ‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥
                                        </button>
                                        <button onclick="addSalt()" class="bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-3 rounded text-sm font-semibold transition-colors">
                                            üßÇ ‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≤‡∏£
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="bg-orange-50 p-6 rounded-xl">
                                <h4 class="text-lg font-semibold text-orange-800 mb-3">‚ùì ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°: ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢</h4>
                                <p class="mb-4">‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏™‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢ ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡πÉ‡∏î?</p>
                                <div class="space-y-2">
                                    <label class="flex items-center cursor-pointer hover:bg-orange-100 p-2 rounded">
                                        <input type="radio" name="q1" value="a" class="mr-2">
                                        <span>A) ‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥ ‚Üí ‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≤‡∏£ ‚Üí ‡∏Ñ‡∏ô ‚Üí ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer hover:bg-orange-100 p-2 rounded">
                                        <input type="radio" name="q1" value="b" class="mr-2">
                                        <span>B) ‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≤‡∏£ ‚Üí ‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥ ‚Üí ‡∏Ñ‡∏ô ‚Üí ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer hover:bg-orange-100 p-2 rounded">
                                        <input type="radio" name="q1" value="c" class="mr-2">
                                        <span>C) ‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥‡∏Ñ‡∏£‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ ‚Üí ‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≤‡∏£ ‚Üí ‡∏Ñ‡∏ô</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer hover:bg-orange-100 p-2 rounded">
                                        <input type="radio" name="q1" value="d" class="mr-2">
                                        <span>D) ‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≤‡∏£ ‚Üí ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ ‚Üí ‡∏Ñ‡∏ô</span>
                                    </label>
                                </div>
                                <div class="mt-4">
                                    <button onclick="checkAnswer(1)" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                                        ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
                                    </button>
                                </div>
                                <div id="q1-feedback" class="mt-4 hidden"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center">
                        <button onclick="previousStep(3)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                            ‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
                        </button>
                        <button id="next-btn-1" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors hidden" onclick="nextStep(5)">
                            ‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ üìè
                        </button>
                    </div>
                </div>

                <div id="step-5" class="step-content hidden">
                    <h2 class="text-2xl font-bold text-indigo-800 mb-4">üìè ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£</h2>
                    
                    <div class="grid md:grid-cols-2 gap-8 mb-6">
                        <div>
                            <div class="bg-gray-100 p-6 rounded-xl">
                                <h3 class="text-lg font-semibold mb-4">üß™ ‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£</h3>
                                <div class="text-sm text-gray-600 mb-4 p-3 bg-blue-50 rounded-lg">
                                    üí° <strong>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</strong> ‡∏•‡∏≠‡∏á‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£<br>
                                    ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÑ‡∏î‡πâ
                                </div>
                                <div class="relative">
                                    <div class="measuring-cylinder w-24 h-48 mx-auto mb-4 relative">
                                        <div id="final-solution" class="solution bg-blue-200" style="height: 0%;"></div>
                                        
                                        <div class="scale-mark" style="top: 20%;"></div>
                                        <div class="scale-mark" style="top: 40%;"></div>
                                        <div class="scale-mark" style="top: 60%;"></div>
                                        <div class="scale-mark" style="top: 80%;"></div>
                                        
                                        <div class="absolute right-6 text-xs" style="top: 18%;">
                                            <span id="target-volume-label">250</span> mL
                                        </div>
                                        <div class="absolute right-6 text-xs" style="top: 38%;">200 mL</div>
                                        <div class="absolute right-6 text-xs" style="top: 58%;">150 mL</div>
                                        <div class="absolute right-6 text-xs" style="top: 78%;">100 mL</div>
                                        
                                        <div id="meniscus-line" class="absolute w-full border-t-2 border-red-500 opacity-0 transition-opacity duration-500" style="top: 20%;"></div>
                                    </div>
                                    
                                    <div class="text-center mb-2">
                                        <div class="text-lg font-semibold">
                                            ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="current-volume">0</span> mL
                                        </div>
                                        <div class="text-sm text-gray-600">
                                            ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: <span id="target-volume-display">250</span> mL
                                        </div>
                                    </div>
                                    
                                    <div id="final-status" class="text-center text-gray-600 mb-4">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£</div>
                                    
                                    <div class="grid grid-cols-3 gap-2">
                                        <button onclick="transferSolution()" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-3 rounded text-sm font-semibold transition-colors">
                                            üîÑ ‡∏¢‡πâ‡∏≤‡∏¢‡∏™‡∏≤‡∏£
                                        </button>
                                        <button onclick="addMoreWater()" class="bg-cyan-500 hover:bg-cyan-600 text-white py-2 px-3 rounded text-sm font-semibold transition-colors">
                                            üíß ‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥
                                        </button>
                                        <button onclick="finalMix()" class="bg-green-500 hover:bg-green-600 text-white py-2 px-3 rounded text-sm font-semibold transition-colors">
                                            üåÄ ‡∏Ñ‡∏ô‡∏ú‡∏™‡∏°
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="bg-orange-50 p-6 rounded-xl">
                                <h4 class="text-lg font-semibold text-orange-800 mb-3">‚ùì ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°: Volumetric Flask</h4>
                                <p class="mb-4">‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢ ‡πÄ‡∏´‡∏ï‡∏∏‡πÉ‡∏î‡∏à‡∏∂‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Volumetric Flask ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢?</p>
                                <div class="space-y-2">
                                    <label class="flex items-center cursor-pointer hover:bg-orange-100 p-2 rounded">
                                        <input type="radio" name="q2" value="a" class="mr-2">
                                        <span>A) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer hover:bg-orange-100 p-2 rounded">
                                        <input type="radio" name="q2" value="b" class="mr-2">
                                        <span>B) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏™‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer hover:bg-orange-100 p-2 rounded">
                                        <input type="radio" name="q2" value="c" class="mr-2">
                                        <span>C) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer hover:bg-orange-100 p-2 rounded">
                                        <input type="radio" name="q2" value="d" class="mr-2">
                                        <span>D) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ</span>
                                    </label>
                                </div>
                                <div class="mt-4">
                                    <button onclick="checkAnswer(2)" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                                        ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
                                    </button>
                                </div>
                                <div id="q2-feedback" class="mt-4 hidden"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center">
                        <button onclick="previousStep(4)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                            ‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
                        </button>
                        <button id="next-btn-2" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors hidden" onclick="showCompletion()">
                            ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô üéâ
                        </button>
                    </div>
                </div>

                <div id="completion" class="step-content hidden">
                    <div class="text-center py-12">
                        <div class="text-6xl mb-4">üéâ</div>
                        <h2 class="text-3xl font-bold text-green-600 mb-4">‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å! ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h2>
                        <div class="bg-green-50 p-6 rounded-xl max-w-md mx-auto mb-6">
                            <h3 class="text-xl font-semibold mb-4">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</h3>
                            <div id="final-results" class="space-y-2 text-left"></div>
                            <div id="score-display" class="mt-4 p-4 bg-yellow-100 rounded-lg">
                                <div class="text-lg font-semibold">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: <span id="total-score">0</span>/2</div>
                            </div>
                        </div>
                        <button onclick="resetGame()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors">
                            üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const compounds = {
            'NaCl': {
                name: '‡πÇ‡∏ã‡πÄ‡∏î‡∏µ‡∏¢‡∏°‡∏Ñ‡∏•‡∏≠‡πÑ‡∏£‡∏î‡πå',
                mw: 58.44,
                molarity: 0.5,
                volume: 250,
                color: '#3b82f6',
                powderColor: '#fbbf24',
                description: '‡πÄ‡∏Å‡∏•‡∏∑‡∏≠‡πÅ‡∏Å‡∏á - ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∏‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°'
            },
            'KMnO4': {
                name: '‡πÇ‡∏õ‡πÅ‡∏ï‡∏™‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÅ‡∏°‡∏á‡∏Å‡∏≤‡πÄ‡∏ô‡∏ï',
                mw: 158.03,
                molarity: 0.2,
                volume: 500,
                color: '#7c2d92',
                powderColor: '#4c1d95',
                description: '‡∏™‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡πÑ‡∏î‡∏ã‡πå - ‡πÉ‡∏ä‡πâ‡∏Ü‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå'
            },
            'CuSO4': {
                name: '‡∏Ñ‡∏≠‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏ã‡∏±‡∏•‡πÄ‡∏ü‡∏ï',
                mw: 249.68,
                molarity: 0.3,
                volume: 300,
                color: '#0ea5e9',
                powderColor: '#0284c7',
                description: '‡πÄ‡∏Å‡∏•‡∏∑‡∏≠‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á - ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≤‡∏£‡∏Ü‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πã‡∏¢'
            },
            'NaOH': {
                name: '‡πÇ‡∏ã‡πÄ‡∏î‡∏µ‡∏¢‡∏°‡πÑ‡∏Æ‡∏î‡∏£‡∏≠‡∏Å‡πÑ‡∏ã‡∏î‡πå',
                mw: 40.00,
                molarity: 0.1,
                volume: 1000,
                color: '#6b7280',
                powderColor: '#f3f4f6',
                description: '‡πÇ‡∏ã‡∏î‡∏≤‡πÑ‡∏ü - ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡∏™‡∏ö‡∏π‡πà‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©'
            },
            'HCl': {
                name: '‡∏Å‡∏£‡∏î‡πÑ‡∏Æ‡πÇ‡∏î‡∏£‡∏Ñ‡∏•‡∏≠‡∏£‡∏¥‡∏Å',
                mw: 36.46,
                molarity: 0.25,
                volume: 400,
                color: '#fbbf24',
                powderColor: '#f59e0b',
                description: '‡∏Å‡∏£‡∏î‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô - ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£'
            }
        };

        let currentStep = 1;
        let selectedCompound = 'NaCl';
        let correctMass = 0;
        let currentMass = 0;
        let score = 0;
        let q1Correct = false;
        let q2Correct = false;

        const totalSteps = 5;

        function updateProblem() {
            selectedCompound = document.getElementById('compound-select').value;
            const compound = compounds[selectedCompound];
            document.getElementById('display-compound').textContent = selectedCompound;
            document.getElementById('display-molarity').textContent = `${compound.molarity} M`;
            document.getElementById('display-volume').textContent = `${compound.volume} mL`;
            document.getElementById('compound-details').textContent = `${selectedCompound} ‡∏°‡∏µ‡∏°‡∏ß‡∏•‡πÇ‡∏°‡πÄ‡∏•‡∏Å‡∏∏‡∏• = ${compound.mw} g/mol`;
            
            document.getElementById('volume-input').value = compound.volume;
            document.getElementById('volume-liters').value = (compound.volume / 1000).toFixed(3);
            document.getElementById('molarity-input').value = compound.molarity;
            document.getElementById('volume-for-moles').value = (compound.volume / 1000).toFixed(3);
            document.getElementById('mw-input').value = compound.mw;

            correctMass = compound.molarity * (compound.volume / 1000) * compound.mw;
            document.getElementById('required-mass').textContent = correctMass.toFixed(2);
            
            currentMass = 0;
            document.getElementById('scale-display').textContent = '0.00 g';
            document.getElementById('weighing-progress').style.width = '0%';
            document.getElementById('weighing-status').textContent = '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡∏±‡πà‡∏á‡∏™‡∏≤‡∏£';
            document.getElementById('powder-on-scale').style.opacity = '0';
        }

        function nextStep(step) {
            document.getElementById(`step-${currentStep}`).classList.add('hidden');
            currentStep = step;
            document.getElementById(`step-${currentStep}`).classList.remove('hidden');
            
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = `‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà ${currentStep}/${totalSteps}`;
            
            if (currentStep === 3) {
                document.getElementById('required-mass').textContent = correctMass.toFixed(2);
            }
            if (currentStep === 5) {
                const compound = compounds[selectedCompound];
                document.getElementById('target-volume-label').textContent = compound.volume;
                document.getElementById('target-volume-display').textContent = compound.volume;
            }
        }

        function previousStep(step) {
            document.getElementById(`step-${currentStep}`).classList.add('hidden');
            currentStep = step;
            document.getElementById(`step-${currentStep}`).classList.remove('hidden');
            
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = `‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà ${currentStep}/${totalSteps}`;
        }
        
        function checkCalculation() {
            const compound = compounds[selectedCompound];
            const volumeLiters = compound.volume / 1000;
            const moles = compound.molarity * volumeLiters;
            const mass = moles * compound.mw;

            const userVolumeLiters = parseFloat(document.getElementById('volume-liters').value);
            const userMoles = parseFloat(document.getElementById('moles-calc').value);
            const userMass = parseFloat(document.getElementById('mass-calc').value);

            const tolerance = 0.01;
            let isCorrect = true;
            let feedback = '';

            if (Math.abs(userVolumeLiters - volumeLiters) > tolerance) {
                isCorrect = false;
                feedback += `1. ‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏¥‡∏ï‡∏£‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô ${(volumeLiters).toFixed(3)} L <br>`;
            }
            if (Math.abs(userMoles - moles) > tolerance) {
                isCorrect = false;
                feedback += `2. ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÇ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô ${(moles).toFixed(4)} mol <br>`;
            }
            if (Math.abs(userMass - mass) > tolerance) {
                isCorrect = false;
                feedback += `3. ‡∏°‡∏ß‡∏•‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô ${(mass).toFixed(2)} g <br>`;
            }

            const feedbackEl = document.getElementById('calculation-feedback');
            if (isCorrect) {
                feedbackEl.innerHTML = '<span class="text-green-600 font-semibold">‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</span>';
                feedbackEl.classList.remove('hidden', 'text-red-600');
                feedbackEl.classList.add('text-green-600');
                document.getElementById('next-btn-calc').classList.remove('hidden');
            } else {
                feedbackEl.innerHTML = `<span class="text-red-600 font-semibold">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:</span> <br>${feedback}`;
                feedbackEl.classList.remove('hidden', 'text-green-600');
                feedbackEl.classList.add('text-red-600');
                document.getElementById('next-btn-calc').classList.add('hidden');
            }
        }

        function addPowder() {
            if (currentMass < correctMass) {
                currentMass += Math.random() * 5 + 1;
                if (currentMass > correctMass) {
                    currentMass = correctMass + (Math.random() * 0.1);
                }
                
                const progress = (currentMass / correctMass) * 100;
                document.getElementById('scale-display').textContent = `${currentMass.toFixed(2)} g`;
                document.getElementById('weighing-progress').style.width = `${progress}%`;
                document.getElementById('powder-on-scale').style.opacity = '1';
                
                if (Math.abs(currentMass - correctMass) <= 0.1) {
                    document.getElementById('weighing-status').textContent = '‡∏ä‡∏±‡πà‡∏á‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß!';
                    document.getElementById('weighing-progress').classList.remove('bg-green-500');
                    document.getElementById('weighing-progress').classList.add('bg-blue-500');
                    document.getElementById('next-btn-weighing').classList.remove('hidden');
                } else {
                    document.getElementById('weighing-status').textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ä‡∏±‡πà‡∏á‡∏™‡∏≤‡∏£...';
                }
            } else {
                document.getElementById('weighing-status').textContent = '‡∏ä‡∏±‡πà‡∏á‡∏™‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
            }
        }
        
        function addSalt() {
            const powderParticles = document.getElementById('powder-particles');
            const compound = compounds[selectedCompound];
            powderParticles.innerHTML = '';
            
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.classList.add('powder');
                particle.style.background = compound.powderColor;
                particle.style.width = `${Math.random() * 10 + 5}px`;
                particle.style.height = particle.style.width;
                
                particle.style.left = `${Math.random() * 60 + 20}%`;
                particle.style.top = `${Math.random() * 10 + 20}%`; 

                const animationName = `fall-${Date.now()}-${i}`;
                const keyframes = `
                    @keyframes ${animationName} {
                        0% { transform: translateY(0); opacity: 1; }
                        100% { transform: translateY(120px); opacity: 0; }
                    }
                `;
                const styleSheet = document.createElement("style");
                styleSheet.innerHTML = keyframes;
                document.head.appendChild(styleSheet);
                particle.style.animation = `${animationName} 1.5s forwards`;

                powderParticles.appendChild(particle);
            }
            
            document.getElementById('dissolving-status').textContent = '‡πÄ‡∏ï‡∏¥‡∏°‡∏ú‡∏á‡∏™‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß!';
        }
        
        function stirSolution() {
            const stirringRod = document.getElementById('stirring-rod');
            const dissolvingStatus = document.getElementById('dissolving-status');
            const powderParticles = document.getElementById('powder-particles');
            
            stirringRod.style.top = '70%'; 
            stirringRod.classList.add('active');

            dissolvingStatus.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏ô‡∏™‡∏≤‡∏£...';
            
            powderParticles.style.transition = 'opacity 2s ease-in-out';
            powderParticles.style.opacity = '0';
            
            setTimeout(() => {
                stirringRod.classList.remove('active');
                stirringRod.style.top = '-4rem'; 
                dissolvingStatus.textContent = '‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß!';
                powderParticles.innerHTML = '';
                powderParticles.style.opacity = '1';
                document.getElementById('next-btn-1').classList.remove('hidden');
            }, 2000);
        }

        function addWater() {
            const solutionLevel = document.getElementById('solution-level');
            const compound = compounds[selectedCompound];
            let currentHeight = parseInt(solutionLevel.style.height);
            if (currentHeight < 70) {
                currentHeight += 10;
                solutionLevel.style.height = `${currentHeight}%`;
                solutionLevel.style.backgroundColor = compound.color; // Set solution color
                document.getElementById('dissolving-status').textContent = `‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°... (${currentHeight}%)`;
            } else {
                document.getElementById('dissolving-status').textContent = '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥‡πÉ‡∏ô‡∏ö‡∏µ‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡πÅ‡∏•‡πâ‡∏ß!';
            }
        }
        
        function checkAnswer(questionNum) {
            const answer = document.querySelector(`input[name="q${questionNum}"]:checked`);
            const feedbackEl = document.getElementById(`q${questionNum}-feedback`);
            if (!answer) {
                feedbackEl.innerHTML = '<span class="text-red-600">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô</span>';
                feedbackEl.classList.remove('hidden');
                return;
            }
            
            if (questionNum === 1) {
                if (answer.value === 'b') {
                    feedbackEl.innerHTML = '<span class="text-green-600 font-semibold">‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!</span> <br>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢: ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∂‡∏á‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏Ñ‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô';
                    feedbackEl.classList.remove('hidden', 'text-red-600');
                    feedbackEl.classList.add('text-green-600');
                    if (!q1Correct) {
                        q1Correct = true;
                        score++;
                    }
                } else {
                    feedbackEl.innerHTML = '<span class="text-red-600 font-semibold">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</span> <br>‡∏•‡∏≠‡∏á‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢';
                    feedbackEl.classList.remove('hidden', 'text-green-600');
                    feedbackEl.classList.add('text-red-600');
                    q1Correct = false;
                }
            } else if (questionNum === 2) {
                if (answer.value === 'a') {
                    feedbackEl.innerHTML = '<span class="text-green-600 font-semibold">‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!</span> <br>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢: Volumetric Flask ‡∏ñ‡∏π‡∏Å‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î';
                    feedbackEl.classList.remove('hidden', 'text-red-600');
                    feedbackEl.classList.add('text-green-600');
                    if (!q2Correct) {
                        q2Correct = true;
                        score++;
                    }
                } else {
                    feedbackEl.innerHTML = '<span class="text-red-600 font-semibold">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</span> <br>‡∏•‡∏≠‡∏á‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ô‡∏µ‡πâ';
                    feedbackEl.classList.remove('hidden', 'text-green-600');
                    feedbackEl.classList.add('text-red-600');
                    q2Correct = false;
                }
            }
            
        }

        let finalVolume = 0;
        function transferSolution() {
            const compound = compounds[selectedCompound];
            document.getElementById('final-solution').style.height = '30%';
            document.getElementById('final-solution').style.backgroundColor = compound.color;
            document.getElementById('current-volume').textContent = (compound.volume * 0.3).toFixed(0);
            document.getElementById('final-status').textContent = '‡∏¢‡πâ‡∏≤‡∏¢‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏•‡∏á‡πÉ‡∏ô Volumetric Flask ‡πÅ‡∏•‡πâ‡∏ß';
        }

        function addMoreWater() {
            const targetVolume = compounds[selectedCompound].volume;
            let currentVolume = parseFloat(document.getElementById('current-volume').textContent);
            let increment = Math.random() * 50 + 20; 
            const compound = compounds[selectedCompound];
            
            if (currentVolume < targetVolume) {
                currentVolume += increment;
                if (currentVolume > targetVolume) {
                    currentVolume = targetVolume;
                }
                const heightPercentage = (currentVolume / targetVolume) * 100;
                document.getElementById('final-solution').style.height = `${heightPercentage}%`;
                document.getElementById('final-solution').style.backgroundColor = compound.color;
                document.getElementById('current-volume').textContent = currentVolume.toFixed(0);
                document.getElementById('final-status').textContent = `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥...`;
            } else {
                document.getElementById('final-status').textContent = '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß!';
            }
            
            if (Math.abs(currentVolume - targetVolume) < 5) {
                document.getElementById('meniscus-line').style.opacity = '1';
                document.getElementById('final-status').textContent = '‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥‡πÉ‡∏Å‡∏•‡πâ‡∏ñ‡∏∂‡∏á‡∏Ç‡∏µ‡∏î‡∏ö‡∏≠‡∏Å‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡πÅ‡∏•‡πâ‡∏ß!';
            }
            
            if (Math.abs(currentVolume - targetVolume) < 1) {
                document.getElementById('final-status').textContent = '‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡πÑ‡∏î‡πâ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏•‡πâ‡∏ß!';
                document.getElementById('next-btn-2').classList.remove('hidden');
            }
            
            finalVolume = currentVolume;
        }

        function finalMix() {
            document.getElementById('final-status').textContent = '‡∏ú‡∏™‡∏°‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß!';
        }

        function showCompletion() {
            document.getElementById(`step-${currentStep}`).classList.add('hidden');
            document.getElementById('completion').classList.remove('hidden');
            
            const compound = compounds[selectedCompound];
            const finalResults = document.getElementById('final-results');
            finalResults.innerHTML = `
                <p>‚úÖ ‡∏™‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö: <span class="font-semibold">${selectedCompound}</span></p>
                <p>‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏î‡πâ: <span class="font-semibold">${compound.molarity} M</span></p>
                <p>‚úÖ ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢: <span class="font-semibold">${finalVolume.toFixed(2)} mL</span> (‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ${compound.volume} mL)</p>
            `;
            
            document.getElementById('total-score').textContent = score;
        }

        function resetGame() {
            currentStep = 1;
            score = 0;
            q1Correct = false;
            q2Correct = false;
            document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));
            document.getElementById('step-1').classList.remove('hidden');
            updateProblem();
            
            document.getElementById('next-btn-calc').classList.add('hidden');
            document.getElementById('next-btn-weighing').classList.add('hidden');
            document.getElementById('next-btn-1').classList.add('hidden');
            document.getElementById('next-btn-2').classList.add('hidden');
            document.getElementById('calculation-feedback').classList.add('hidden');
            document.getElementById('q1-feedback').classList.add('hidden');
            document.getElementById('q2-feedback').classList.add('hidden');
            document.getElementById('meniscus-line').style.opacity = '0';
        }

        document.addEventListener('DOMContentLoaded', () => {
            updateProblem();
            resetGame();
        });
    </script>
</body>
</html>
